<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Your Spotify Pulse</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Mono:ital,wght@0,300;0,400;1,300&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #080b0f;
    --surface: #0e1318;
    --surface2: #141b22;
    --border: #1e2d3d;
    --accent1: #00f5a0;
    --accent2: #ff3c6e;
    --accent3: #ffd93d;
    --accent4: #6c63ff;
    --text: #c8d8e8;
    --muted: #4a6278;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'DM Mono', monospace;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Animated grid background */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image:
      linear-gradient(rgba(0,245,160,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0,245,160,0.03) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: 0;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 48px 24px;
    position: relative;
    z-index: 1;
  }

  header {
    margin-bottom: 64px;
    border-left: 3px solid var(--accent1);
    padding-left: 24px;
  }

  .eyebrow {
    font-size: 11px;
    letter-spacing: 0.25em;
    color: var(--accent1);
    text-transform: uppercase;
    margin-bottom: 8px;
  }

  h1 {
    font-family: 'Bebas Neue', sans-serif;
    font-size: clamp(56px, 10vw, 96px);
    line-height: 0.9;
    color: #fff;
    letter-spacing: 0.02em;
  }

  h1 span {
    color: var(--accent1);
  }

  .subtitle {
    margin-top: 16px;
    font-size: 12px;
    color: var(--muted);
    letter-spacing: 0.1em;
  }

  /* Section headers */
  .section-label {
    font-size: 10px;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 12px;
  }
  .section-label::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--border);
  }

  /* Stat cards row */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 2px;
    margin-bottom: 48px;
    background: var(--border);
    border: 1px solid var(--border);
  }

  .stat-card {
    background: var(--surface);
    padding: 28px 20px;
    position: relative;
    overflow: hidden;
    transition: background 0.2s;
  }

  .stat-card:hover { background: var(--surface2); }

  .stat-card::before {
    content: '';
    position: absolute;
    bottom: 0; left: 0; right: 0;
    height: 2px;
    background: var(--card-color, var(--accent1));
    transform: scaleX(0);
    transition: transform 0.3s;
    transform-origin: left;
  }
  .stat-card:hover::before { transform: scaleX(1); }

  .stat-num {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 52px;
    line-height: 1;
    color: var(--card-color, var(--accent1));
  }

  .stat-label {
    font-size: 10px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--muted);
    margin-top: 6px;
  }

  /* Two-column layout */
  .two-col {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
    margin-bottom: 48px;
  }

  @media (max-width: 700px) {
    .two-col { grid-template-columns: 1fr; }
  }

  .panel {
    background: var(--surface);
    border: 1px solid var(--border);
    padding: 28px;
  }

  .panel h3 {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 22px;
    letter-spacing: 0.05em;
    color: #fff;
    margin-bottom: 20px;
  }

  /* Genre donut chart */
  #genre-chart {
    display: flex;
    align-items: center;
    gap: 24px;
    flex-wrap: wrap;
  }

  .donut-wrap {
    position: relative;
    width: 140px;
    height: 140px;
    flex-shrink: 0;
  }

  .donut-wrap svg { transform: rotate(-90deg); }

  .donut-center {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-family: 'Bebas Neue', sans-serif;
    font-size: 28px;
    color: #fff;
    line-height: 1;
  }

  .donut-center span {
    font-size: 10px;
    font-family: 'DM Mono', monospace;
    letter-spacing: 0.15em;
    color: var(--muted);
    text-transform: uppercase;
  }

  .legend {
    flex: 1;
    min-width: 160px;
  }

  .legend-item {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
    font-size: 11px;
    color: var(--text);
  }

  .legend-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
  }

  .legend-pct {
    margin-left: auto;
    color: var(--muted);
    font-size: 10px;
  }

  /* Bar chart */
  .bar-chart { display: flex; flex-direction: column; gap: 10px; }

  .bar-row {
    display: grid;
    grid-template-columns: 90px 1fr 36px;
    align-items: center;
    gap: 10px;
    font-size: 10px;
  }

  .bar-label {
    color: var(--text);
    letter-spacing: 0.05em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    text-align: right;
  }

  .bar-track {
    height: 8px;
    background: var(--border);
    position: relative;
    overflow: hidden;
  }

  .bar-fill {
    height: 100%;
    background: var(--fill-color, var(--accent1));
    transform-origin: left;
    animation: barIn 0.8s ease forwards;
    transform: scaleX(0);
  }

  @keyframes barIn {
    to { transform: scaleX(1); }
  }

  .bar-val {
    color: var(--muted);
    font-size: 10px;
    text-align: right;
  }

  /* Artist popularity scatter */
  #scatter-wrap {
    position: relative;
    width: 100%;
    padding-top: 75%;
  }

  #scatter-wrap canvas {
    position: absolute;
    inset: 0;
    width: 100% !important;
    height: 100% !important;
  }

  /* Top artists list */
  .artist-list { display: flex; flex-direction: column; gap: 0; }

  .artist-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 0;
    border-bottom: 1px solid var(--border);
    font-size: 11px;
    transition: padding-left 0.2s;
  }

  .artist-item:hover { padding-left: 6px; }
  .artist-item:last-child { border-bottom: none; }

  .artist-rank {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 20px;
    color: var(--muted);
    width: 28px;
    flex-shrink: 0;
  }

  .artist-info { flex: 1; min-width: 0; }

  .artist-name {
    color: #fff;
    font-size: 12px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .artist-genre {
    color: var(--muted);
    font-size: 10px;
    margin-top: 2px;
  }

  .artist-pop {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 20px;
    color: var(--accent3);
    width: 32px;
    text-align: right;
  }

  /* Playlist size chart */
  .playlist-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
    gap: 6px;
  }

  .pl-block {
    background: var(--surface2);
    border: 1px solid var(--border);
    padding: 8px 6px;
    text-align: center;
    transition: all 0.2s;
    cursor: default;
    position: relative;
    overflow: hidden;
  }

  .pl-block::before {
    content: '';
    position: absolute;
    bottom: 0; left: 0; right: 0;
    background: var(--accent4);
    transition: height 0.3s ease;
  }

  .pl-block:hover {
    border-color: var(--accent4);
    z-index: 2;
  }

  .pl-block .pl-num {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 22px;
    color: var(--accent4);
    line-height: 1;
  }

  .pl-block .pl-name {
    font-size: 8px;
    letter-spacing: 0.05em;
    color: var(--muted);
    margin-top: 4px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    text-transform: uppercase;
  }

  /* Split identity section */
  .identity-section {
    background: var(--surface);
    border: 1px solid var(--border);
    padding: 36px;
    margin-bottom: 48px;
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: 32px;
    align-items: center;
  }

  @media (max-width: 600px) {
    .identity-section { grid-template-columns: 1fr; }
  }

  .identity-half { text-align: center; }

  .identity-genre {
    font-family: 'Bebas Neue', sans-serif;
    font-size: clamp(32px, 6vw, 56px);
    line-height: 1;
    margin-bottom: 8px;
  }

  .identity-stat {
    font-size: 11px;
    color: var(--muted);
    letter-spacing: 0.1em;
  }

  .identity-divider {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    color: var(--muted);
    font-size: 10px;
    letter-spacing: 0.2em;
  }

  .vs-circle {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    border: 2px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Bebas Neue', sans-serif;
    font-size: 20px;
    color: #fff;
  }

  .pill {
    display: inline-block;
    padding: 3px 8px;
    border: 1px solid currentColor;
    font-size: 9px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    border-radius: 2px;
    margin: 2px;
  }

  /* Follower range viz */
  .follower-bins {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 2px;
    margin-top: 16px;
  }

  .fbin {
    background: var(--surface2);
    border: 1px solid var(--border);
    padding: 12px 8px;
    text-align: center;
  }

  .fbin-count {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 32px;
    color: var(--accent2);
  }

  .fbin-label {
    font-size: 8px;
    letter-spacing: 0.1em;
    color: var(--muted);
    text-transform: uppercase;
    margin-top: 4px;
    line-height: 1.4;
  }

  /* Insight box */
  .insight {
    background: linear-gradient(135deg, rgba(0,245,160,0.05), rgba(108,99,255,0.05));
    border: 1px solid rgba(0,245,160,0.2);
    padding: 24px 28px;
    margin-bottom: 48px;
    font-size: 13px;
    line-height: 1.8;
    color: var(--text);
    font-style: italic;
  }

  .insight strong { color: var(--accent1); font-style: normal; }

  /* fade in animation */
  .fade-in {
    opacity: 0;
    transform: translateY(20px);
    animation: fadeUp 0.6s ease forwards;
  }

  @keyframes fadeUp {
    to { opacity: 1; transform: translateY(0); }
  }

  .fade-in:nth-child(1) { animation-delay: 0.1s; }
  .fade-in:nth-child(2) { animation-delay: 0.2s; }
  .fade-in:nth-child(3) { animation-delay: 0.3s; }
  .fade-in:nth-child(4) { animation-delay: 0.4s; }
  .fade-in:nth-child(5) { animation-delay: 0.5s; }

  footer {
    text-align: center;
    font-size: 10px;
    color: var(--muted);
    letter-spacing: 0.15em;
    padding: 32px 0 0;
    border-top: 1px solid var(--border);
    text-transform: uppercase;
  }
</style>
</head>
<body>
<div class="container">

  <header class="fade-in">
    <div class="eyebrow">// Spotify Data Analysis</div>
    <h1>YOUR<br><span>SONIC</span><br>PROFILE</h1>
    <div class="subtitle">50 TRACKS · 50 ARTISTS · 50 PLAYLISTS · ANALYZED</div>
  </header>

  <!-- Stats Row -->
  <div class="section-label fade-in">Overview</div>
  <div class="stats-grid fade-in">
    <div class="stat-card" style="--card-color: var(--accent1)">
      <div class="stat-num">50</div>
      <div class="stat-label">Saved Tracks</div>
    </div>
    <div class="stat-card" style="--card-color: var(--accent2)">
      <div class="stat-num">50</div>
      <div class="stat-label">Followed Artists</div>
    </div>
    <div class="stat-card" style="--card-color: var(--accent3)">
      <div class="stat-num">50</div>
      <div class="stat-label">Playlists</div>
    </div>
    <div class="stat-card" style="--card-color: var(--accent4)">
      <div class="stat-num" id="total-tracks-count">—</div>
      <div class="stat-label">Total Playlist Tracks</div>
    </div>
    <div class="stat-card" style="--card-color: #ff9f43)">
      <div class="stat-num" id="avg-pop">—</div>
      <div class="stat-label">Avg Artist Popularity</div>
    </div>
    <div class="stat-card" style="--card-color: var(--accent1)">
      <div class="stat-num" id="total-followers">—</div>
      <div class="stat-label">Total Followers (M)</div>
    </div>
  </div>

  <!-- Split Identity -->
  <div class="section-label fade-in">Listening Identity</div>
  <div class="identity-section fade-in">
    <div class="identity-half">
      <div class="identity-genre" style="color: var(--accent1)">HOUSE</div>
      <div style="margin-bottom:12px">
        <span class="pill" style="color:var(--accent1)">Tech House</span>
        <span class="pill" style="color:var(--accent1)">Prog House</span>
        <span class="pill" style="color:var(--accent1)">Melodic</span>
      </div>
      <div class="identity-stat">Dominates your <strong style="color:var(--text)">saved tracks</strong></div>
      <div class="identity-stat" style="margin-top:4px">John Summit · Noizu · SIDEPIECE</div>
      <div class="identity-stat" style="margin-top:4px">Biscits · Deeper Purpose</div>
    </div>
    <div class="identity-divider">
      <div class="vs-circle">VS</div>
      <div>dual<br>identity</div>
    </div>
    <div class="identity-half">
      <div class="identity-genre" style="color: var(--accent2)">DnB</div>
      <div style="margin-bottom:12px">
        <span class="pill" style="color:var(--accent2)">Liquid Funk</span>
        <span class="pill" style="color:var(--accent2)">Jungle</span>
        <span class="pill" style="color:var(--accent2)">Rollers</span>
      </div>
      <div class="identity-stat">Dominates your <strong style="color:var(--text)">followed artists</strong></div>
      <div class="identity-stat" style="margin-top:4px">Hybrid Minds · 1991 · Culture Shock</div>
      <div class="identity-stat" style="margin-top:4px">Pola & Bryson · IMANU</div>
    </div>
  </div>

  <!-- Genre breakdown + top artists -->
  <div class="two-col fade-in">
    <div class="panel">
      <h3>Artist Genres</h3>
      <div id="genre-chart">
        <div class="donut-wrap">
          <svg width="140" height="140" viewBox="0 0 140 140" id="donut-svg"></svg>
          <div class="donut-center">
            <div id="donut-num">10</div>
            <span>genres</span>
          </div>
        </div>
        <div class="legend" id="genre-legend"></div>
      </div>
    </div>
    <div class="panel">
      <h3>Top Artists by Popularity</h3>
      <div class="artist-list" id="top-artists"></div>
    </div>
  </div>

  <!-- Bars -->
  <div class="two-col fade-in">
    <div class="panel">
      <h3>Most-Tagged Tracks Artists</h3>
      <div class="bar-chart" id="track-artists-chart"></div>
    </div>
    <div class="panel">
      <h3>Follower Size Buckets</h3>
      <p style="font-size:11px; color:var(--muted); margin-bottom:16px; line-height:1.6">How underground is your artist roster? Followers distribution across your 50 followed artists.</p>
      <div class="follower-bins" id="follower-bins"></div>
    </div>
  </div>

  <!-- Playlist viz -->
  <div class="section-label fade-in">Playlist Library</div>
  <div class="panel fade-in" style="margin-bottom:48px">
    <h3>All Playlists by Track Count</h3>
    <p style="font-size:11px; color:var(--muted); margin-bottom:20px">Each block = one playlist. Size reflects track count.</p>
    <div class="playlist-grid" id="playlist-grid"></div>
  </div>

  <!-- Popularity distribution -->
  <div class="section-label fade-in">Artist Popularity Distribution</div>
  <div class="panel fade-in" style="margin-bottom:48px">
    <h3>Popularity Score Spread</h3>
    <p style="font-size:11px; color:var(--muted); margin-bottom:20px">Spotify popularity 0–100 for each of your 50 followed artists. Most cluster underground.</p>
    <div class="bar-chart" id="pop-distribution"></div>
  </div>

  <!-- Insight -->
  <div class="insight fade-in">
    You are a <strong>curator with a split personality</strong>: your track saves and house playlists suggest an active DJ or music professional building sets for specific venues (Sandbar, Killarney's, Sharkees, 2nd Floor), while your followed artist roster is a deep collector's archive of <strong>drum & bass and liquid funk</strong>. You follow artists with a median of ~40 Spotify followers in the low thousands — a signal of genuine underground engagement, not algorithm-fed discovery. <strong>~72% of your followed artists are DnB/jungle</strong>, yet none of your recent saved tracks are DnB. These are two completely separate listening modes running in parallel.
  </div>

  <footer>Generated from your Spotify export · 2026</footer>

</div>

<script>
// ─── DATA ────────────────────────────────────────────────────────────────────

const artists = [
  {name:"JYXE",genres:["drum and bass"],followers:249,popularity:29},
  {name:"Blooom",genres:["drum and bass"],followers:19157,popularity:47},
  {name:"Moekel",genres:["drum and bass","liquid funk"],followers:527,popularity:7},
  {name:"T & Sugah",genres:["drum and bass","liquid funk"],followers:28424,popularity:46},
  {name:"Subsonic",genres:["drum and bass","bassline"],followers:46433,popularity:49},
  {name:"1991",genres:["drum and bass","liquid funk"],followers:81143,popularity:55},
  {name:"Mozey",genres:["drum and bass","bassline","jungle"],followers:52084,popularity:50},
  {name:"Waeys",genres:["drum and bass","liquid funk","jungle"],followers:17417,popularity:37},
  {name:"QZB",genres:["drum and bass","liquid funk","jungle"],followers:22660,popularity:37},
  {name:"Captain Bass",genres:["drum and bass","bassline"],followers:14999,popularity:31},
  {name:"Pola & Bryson",genres:["liquid funk","drum and bass"],followers:80919,popularity:52},
  {name:"Culture Shock",genres:["drum and bass","liquid funk"],followers:109839,popularity:50},
  {name:"Gordo",genres:["techengue","afro house","latin house"],followers:198908,popularity:59},
  {name:"Tall Order (UK)",genres:["drum and bass","jungle"],followers:1252,popularity:12},
  {name:"Deep Notion",genres:["drum and bass"],followers:8945,popularity:19},
  {name:"4K",genres:["drum and bass","jungle","liquid funk"],followers:7246,popularity:44},
  {name:"Lexurus",genres:["drum and bass","liquid funk"],followers:12748,popularity:39},
  {name:"Skellytn",genres:["drum and bass","drumstep"],followers:6761,popularity:20},
  {name:"ÆON:MODE",genres:["drum and bass"],followers:17691,popularity:41},
  {name:"Rebelution",genres:["reggae","reggae rock","roots reggae"],followers:939494,popularity:60},
  {name:"KNEECAP",genres:[],followers:499053,popularity:60},
  {name:"Fox'd",genres:["bass house","g-house"],followers:8479,popularity:28},
  {name:"Bensley",genres:["drum and bass","liquid funk"],followers:32494,popularity:39},
  {name:"IMANU",genres:["drum and bass","drumstep"],followers:76206,popularity:49},
  {name:"skantia",genres:["drum and bass","liquid funk","bassline"],followers:17158,popularity:33},
  {name:"Nick The Lot",genres:["drum and bass","jungle","bassline"],followers:6481,popularity:25},
  {name:"ATMOS",genres:["drum and bass"],followers:6502,popularity:23},
  {name:"IYAMAH",genres:["uk r&b","alternative r&b","neo soul"],followers:67328,popularity:42},
  {name:"HED SPC",genres:["riddim"],followers:529,popularity:7},
  {name:"SHEEPWOLF",genres:[],followers:34,popularity:0},
  {name:"DJAMBR",genres:[],followers:6,popularity:0},
  {name:"Terrence & Phillip",genres:["drum and bass","bassline"],followers:13934,popularity:24},
  {name:"Padre Guilherme",genres:["christian edm"],followers:240639,popularity:46},
  {name:"KRITIKAL",genres:["drum and bass"],followers:18919,popularity:39},
  {name:"Mythic Creature",genres:["chillstep"],followers:166,popularity:1},
  {name:"Z.ZERØ",genres:[],followers:82,popularity:0},
  {name:"Mums",genres:["drum and bass"],followers:2201,popularity:1},
  {name:"KidWkkd",genres:[],followers:16,popularity:0},
  {name:"Formulus",genres:["drum and bass","liquid funk"],followers:983,popularity:16},
  {name:"Gracie Van Brunt",genres:["drum and bass"],followers:2202,popularity:34},
  {name:"Skanka",genres:["drum and bass"],followers:380,popularity:5},
  {name:"INVOLVER",genres:["drum and bass"],followers:1247,popularity:13},
  {name:"Groove Armada",genres:["big beat","trip hop"],followers:756380,popularity:56},
  {name:"MJ Noble",genres:[],followers:470,popularity:2},
  {name:"STORTSET",genres:["drum and bass"],followers:847,popularity:13},
  {name:"GREGG",genres:[],followers:726,popularity:48},
  {name:"Dope Ammo",genres:["jungle","drum and bass","ragga"],followers:9136,popularity:29},
  {name:"[IVY]",genres:["drum and bass"],followers:29238,popularity:47},
  {name:"Hybrid Minds",genres:["liquid funk","drum and bass"],followers:218102,popularity:56},
  {name:"Refracta",genres:["drum and bass","liquid funk"],followers:6128,popularity:23},
];

const tracks = [
  {name:"crystallized",artists:["John Summit","Subtronics","Inéz"]},
  {name:"Diva",artists:["NO STATIC"]},
  {name:"Disco Bus",artists:["Deeper Purpose"]},
  {name:"Mi Corazón",artists:["Noizu"]},
  {name:"Weightless",artists:["it's murph"]},
  {name:"Crush",artists:["Biscits"]},
  {name:"Take Your Places",artists:["SIDEPIECE","Westend"]},
  {name:"Gasoline",artists:["Noizu"]},
  {name:"Comfort In Chaos",artists:["John Summit"]},
  {name:"Take The Pill",artists:["Kamino","Stalking Gia"]},
  {name:"Carry Out",artists:["Chapter & Verse"]},
  {name:"Embers",artists:["HAYLA"]},
  {name:"Tension",artists:["Kamino","Kyra Mastro"]},
  {name:"One & Done",artists:["Chapter & Verse","Jayelle"]},
  {name:"Me & U",artists:["Trace"]},
  {name:"Cash Out (Odd Mob Remix)",artists:["SIDEPIECE","Bobby Shmurda","Odd Mob"]},
  {name:"Focus",artists:["John Summit","Alok"]},
  {name:"Cash Out (Dave Summer Remix)",artists:["SIDEPIECE","Bobby Shmurda","Dave Summer"]},
  {name:"Coming Up",artists:["Odd Mob","OMNOM","HYPERBEAM"]},
  {name:"Backstage Baddies",artists:["bradeazy","Mike Renza"]},
  {name:"Satisfied",artists:["JUNTARO"]},
  {name:"Def With The Record",artists:["SQWAD"]},
  {name:"Expanse EP",artists:["GENESI"]},
  {name:"Over The Edge",artists:["Nu Aspect","Poppy Baskcomb"]},
  {name:"Bad & Boujee",artists:["Trace"]},
  {name:"Fight It",artists:["Griffen Haas"]},
  {name:"4 Ya Mind",artists:["AYYBO","Discip"]},
  {name:"Paranoia",artists:["JUNTARO"]},
  {name:"Lemonade",artists:["Deeper Purpose"]},
  {name:"365",artists:["Biscits","Camden Cox"]},
  {name:"R 2 ME",artists:["BL3SS","Tchami"]},
  {name:"GDB",artists:["AYYBO"]},
  {name:"Everyone's Your Friend",artists:["OMNOM","Marco Strous"]},
  {name:"Louis V",artists:["Chapter & Verse"]},
  {name:"Ascension",artists:["Andromedik"]},
  {name:"Working Now",artists:["SKILAH"]},
  {name:"That's the Spot",artists:["OMNOM","Sven Lochenhoer"]},
  {name:"Make My Day",artists:["ESSE"]},
  {name:"Freak (In Your Bed)",artists:["Noizu"]},
  {name:"Better Place",artists:["Twin Diplomacy","Jack August"]},
  {name:"GENIE",artists:["ero808","NO STATIC","NAAR (US)"]},
  {name:"Ascension",artists:["Andromedik"]},
  {name:"CALYPSO VIP",artists:["ero808","NXSTY"]},
  {name:"Best of 2022",artists:["Night Bass"]},
  {name:"Define",artists:["Dom Dolla & Go Freek"]},
  {name:"BaBaBa",artists:["Chris Lorenzo","Marco Strous","Buraka Som Sistema"]},
  {name:"WHIPLASH",artists:["AYYBO"]},
  {name:"FATAL ATTRACTION",artists:["ero808"]},
  {name:"Horny",artists:["San Pacho","TOBEHONEST"]},
  {name:"Criminals Move In Silence",artists:["GENESI","Kino Todo"]},
];

const playlists = [
  {name:"Classic Rock EDM",tracks:1},{name:"Sandbar",tracks:30},{name:"Killarney's",tracks:21},
  {name:"Sharkees",tracks:37},{name:"2nd Floor",tracks:28},{name:"Prog House 2026",tracks:31},
  {name:"Dubstep",tracks:6},{name:"House 2026",tracks:90},{name:"Summer Vibes '26",tracks:17},
  {name:"Religious Experience",tracks:13},{name:"Club DnB",tracks:11},{name:"Your Top Songs 2025",tracks:101},
  {name:"rabbit hole.",tracks:13},{name:"My playlist #76",tracks:4},{name:"UKG",tracks:12},
  {name:"Overdrive",tracks:9},{name:"Enchanted Festival",tracks:49},{name:"Epic Foghorn DnB Rollers",tracks:54},
  {name:"Atmospheric DnB Vibes",tracks:51},{name:"If Not Me",tracks:12},{name:"Take It All",tracks:1},
  {name:"Tell Dem",tracks:16},{name:"AMC & Kings of the Rollers",tracks:33},{name:"Apocalypse 2025 DnB Lineup",tracks:30},
  {name:"Apocalypse 2025 DnB Lineup",tracks:30},{name:"Real Life",tracks:3},{name:"Emo",tracks:8},
  {name:"Psypocalypse",tracks:10},{name:"Goth girls",tracks:11},{name:"DnB Rollers Vibes",tracks:35},
  {name:"WubWednesday",tracks:43},{name:"Shella - Halogenix Remix",tracks:23},{name:"Silencio the Sewer",tracks:29},
  {name:"Dark DnB Vibes",tracks:40},{name:"Lola Mae",tracks:22},{name:"Temperance",tracks:55},
  {name:"Mystical DnB Vibes",tracks:39},{name:"Ambient DnB Vibes",tracks:39},{name:"Mentally retyowwwe",tracks:47},
  {name:"Tequila Sunrise",tracks:23},{name:"4x4 DnB",tracks:40},{name:"I Just Wanna Know",tracks:1},
  {name:"Deep End - SIDEPIECE Remix",tracks:2},{name:"E-girl Drift",tracks:13},{name:"Free",tracks:22},
  {name:"Brain Scratch",tracks:63},{name:"Anaesthetist",tracks:10},{name:"5X's USB",tracks:58},
  {name:"Setting Sun",tracks:23},{name:"Skanka & Culture Shock DnB",tracks:33},
];

// ─── COMPUTE ─────────────────────────────────────────────────────────────────

// Total playlist tracks
const totalTracks = playlists.reduce((s,p)=>s+p.tracks,0);
document.getElementById('total-tracks-count').textContent = totalTracks.toLocaleString();

// Avg popularity
const avgPop = Math.round(artists.reduce((s,a)=>s+a.popularity,0)/artists.length);
document.getElementById('avg-pop').textContent = avgPop;

// Total followers in millions
const totalF = artists.reduce((s,a)=>s+a.followers,0);
document.getElementById('total-followers').textContent = (totalF/1e6).toFixed(1)+'M';

// ─── GENRE DONUT ─────────────────────────────────────────────────────────────
const genreMap = {};
artists.forEach(a => {
  a.genres.forEach(g => {
    genreMap[g] = (genreMap[g]||0) + 1;
  });
});

// Consolidate small genres
const consolidated = {
  'Drum & Bass': 0, 'Liquid Funk': 0, 'Jungle': 0, 'Bassline': 0,
  'Drumstep': 0, 'Big Acts': 0, 'Other': 0
};
Object.entries(genreMap).forEach(([g, c]) => {
  if (g==='drum and bass') consolidated['Drum & Bass'] += c;
  else if (g==='liquid funk') consolidated['Liquid Funk'] += c;
  else if (g==='jungle') consolidated['Jungle'] += c;
  else if (g==='bassline') consolidated['Bassline'] += c;
  else if (g==='drumstep') consolidated['Drumstep'] += c;
  else if (['reggae','reggae rock','roots reggae','trip hop','big beat','uk r&b','alternative r&b','neo soul'].includes(g)) consolidated['Big Acts'] += c;
  else consolidated['Other'] += c;
});

const genreColors = ['#00f5a0','#ff3c6e','#ffd93d','#6c63ff','#ff9f43','#54a0ff','#5f27cd'];
const genreEntries = Object.entries(consolidated).filter(([,v])=>v>0).sort((a,b)=>b[1]-a[1]);
const genreTotal = genreEntries.reduce((s,[,v])=>s+v,0);

// Draw donut
const cx=70,cy=70,r=52,strokeW=18;
let startAngle = 0;
const svg = document.getElementById('donut-svg');
genreEntries.forEach(([label, count], i) => {
  const angle = (count/genreTotal)*2*Math.PI;
  const x1=cx+r*Math.cos(startAngle), y1=cy+r*Math.sin(startAngle);
  const x2=cx+r*Math.cos(startAngle+angle), y2=cy+r*Math.sin(startAngle+angle);
  const large = angle>Math.PI?1:0;
  const path = document.createElementNS('http://www.w3.org/2000/svg','path');
  path.setAttribute('d',`M${x1},${y1} A${r},${r} 0 ${large},1 ${x2},${y2}`);
  path.setAttribute('fill','none');
  path.setAttribute('stroke',genreColors[i]);
  path.setAttribute('stroke-width',strokeW);
  path.setAttribute('stroke-linecap','round');
  svg.appendChild(path);
  startAngle += angle + 0.03;
});

// Legend
const legend = document.getElementById('genre-legend');
genreEntries.forEach(([label, count], i) => {
  const pct = Math.round(count/genreTotal*100);
  legend.innerHTML += `
    <div class="legend-item">
      <div class="legend-dot" style="background:${genreColors[i]}"></div>
      <span>${label}</span>
      <span class="legend-pct">${pct}%</span>
    </div>`;
});

// ─── TOP ARTISTS ─────────────────────────────────────────────────────────────
const topArtists = [...artists].sort((a,b)=>b.popularity-a.popularity).slice(0,8);
const taEl = document.getElementById('top-artists');
topArtists.forEach((a,i) => {
  taEl.innerHTML += `
    <div class="artist-item">
      <div class="artist-rank">${String(i+1).padStart(2,'0')}</div>
      <div class="artist-info">
        <div class="artist-name">${a.name}</div>
        <div class="artist-genre">${a.genres.slice(0,2).join(' · ')||'—'}</div>
      </div>
      <div class="artist-pop">${a.popularity}</div>
    </div>`;
});

// ─── TRACK ARTISTS BAR CHART ─────────────────────────────────────────────────
const artistCount = {};
tracks.forEach(t => t.artists.forEach(a => {
  if(a) artistCount[a] = (artistCount[a]||0)+1;
}));
const topTrackArtists = Object.entries(artistCount).sort((a,b)=>b[1]-a[1]).slice(0,10);
const maxTA = topTrackArtists[0][1];
const taChart = document.getElementById('track-artists-chart');
const taColors = ['#00f5a0','#00f5a0','#ffd93d','#ffd93d','#ff3c6e','#ff3c6e','#6c63ff','#6c63ff','#54a0ff','#54a0ff'];
topTrackArtists.forEach(([name, count], i) => {
  taChart.innerHTML += `
    <div class="bar-row">
      <div class="bar-label">${name}</div>
      <div class="bar-track">
        <div class="bar-fill" style="--fill-color:${taColors[i]};width:${count/maxTA*100}%;animation-delay:${i*0.08}s"></div>
      </div>
      <div class="bar-val">${count}</div>
    </div>`;
});

// ─── FOLLOWER BINS ────────────────────────────────────────────────────────────
const bins = [
  {label:'< 1K\nMicro', min:0, max:1000},
  {label:'1K–10K\nSmall', min:1000, max:10000},
  {label:'10K–50K\nMid', min:10000, max:50000},
  {label:'50K–200K\nMajor', min:50000, max:200000},
  {label:'200K+\nBig', min:200000, max:Infinity},
];
const binEl = document.getElementById('follower-bins');
bins.forEach(b => {
  const count = artists.filter(a => a.followers >= b.min && a.followers < b.max).length;
  binEl.innerHTML += `
    <div class="fbin">
      <div class="fbin-count">${count}</div>
      <div class="fbin-label">${b.label}</div>
    </div>`;
});

// ─── PLAYLIST GRID ───────────────────────────────────────────────────────────
const maxPL = Math.max(...playlists.map(p=>p.tracks));
const pgEl = document.getElementById('playlist-grid');
const sorted = [...playlists].sort((a,b)=>b.tracks-a.tracks);
sorted.forEach(p => {
  const intensity = Math.round(p.tracks/maxPL * 100);
  pgEl.innerHTML += `
    <div class="pl-block" title="${p.name}: ${p.tracks} tracks">
      <div class="pl-num">${p.tracks}</div>
      <div class="pl-name">${p.name}</div>
    </div>`;
});

// ─── POPULARITY DISTRIBUTION ─────────────────────────────────────────────────
const popBins = [
  {label:'0 (Ghost)',min:0,max:1},{label:'1–10',min:1,max:11},
  {label:'11–20',min:11,max:21},{label:'21–30',min:21,max:31},
  {label:'31–40',min:31,max:41},{label:'41–50',min:41,max:51},
  {label:'51–60',min:51,max:61},{label:'60+',min:61,max:101},
];
const maxPop = Math.max(...popBins.map(b => artists.filter(a=>a.popularity>=b.min&&a.popularity<b.max).length));
const pdEl = document.getElementById('pop-distribution');
popBins.forEach((b,i) => {
  const count = artists.filter(a=>a.popularity>=b.min&&a.popularity<b.max).length;
  const colors = ['#2c2c2c','#3d1a2a','#6c2040','#ff3c6e','#ff9f43','#ffd93d','#00f5a0','#00c8ff'];
  pdEl.innerHTML += `
    <div class="bar-row">
      <div class="bar-label">${b.label}</div>
      <div class="bar-track">
        <div class="bar-fill" style="--fill-color:${colors[i]};width:${count/maxPop*100}%;animation-delay:${i*0.1}s"></div>
      </div>
      <div class="bar-val">${count}</div>
    </div>`;
});
</script>
</body>
</html>
